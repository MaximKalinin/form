(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/spring.a72c3db1.jpg"},18:function(e,t,a){e.exports=a.p+"static/media/summer.8f83450a.jpg"},19:function(e,t,a){e.exports=a.p+"static/media/fall.e6ff9957.jpg"},20:function(e,t,a){e.exports=a.p+"static/media/winter.b6a5ae8d.jpg"},22:function(e,t,a){e.exports=a(55)},28:function(e,t,a){},29:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(16),r=a.n(l),s=(a(28),a(3)),o=a(4),c=a(6),u=a(5),d=a(7),m=(a(29),a(21)),f=a(8),g=a(2),h=a.n(g),p=a(17),v=a.n(p),y=a(18),E=a.n(y),b=a(19),k=a.n(b),w=a(20),j=a.n(w),S=(a(49),function(e){var t=i.a.createElement("div",{className:"Input"},i.a.createElement("label",null,e.label),i.a.createElement("input",{className:!e.valid&&e.touched?"incorrect":"",placeholder:e.placeholder,type:e.type,value:e.value,onChange:e.onChange,readOnly:e.readonly}),!e.valid&&e.touched?i.a.createElement("div",{className:"hint"},e.hint):null);return"select"===e.type&&(t=i.a.createElement("div",{className:"Input"},i.a.createElement("label",null,e.label),i.a.createElement("select",{placeholder:e.placeholder,type:e.type,value:e.value,onChange:e.onChange,disabled:e.readonly},e.options.map(function(e){return i.a.createElement("option",{key:e},e)})))),t}),C=(a(50),function(e){var t=["Button"];return e.full&&t.push("Full"),i.a.createElement("button",{className:t.join(" "),onClick:e.onClick},e.label)}),I=(a(51),function(e){var t=i.a.createElement("div",{className:"ImageGrid"},e.images.map(function(t){return i.a.createElement("img",{key:t.name,src:t.src,alt:t.name,onClick:e.readonly?null:function(){return e.onImageClick(t.name)},className:t.selected?"selected":""})}));return e.readonly&&e.images.find(function(e){return null===e.selected})&&(t=null),t}),N=(a(52),function(){return i.a.createElement("div",{className:"Loader"},"Loading...")}),O=(a(53),function(e){var t={width:"0%"};return 1===e.stage?t.width="50%":2===e.stage&&(t.width="95%"),i.a.createElement("div",{className:"ProgressBar",style:t})}),H=(a(54),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={stage:0,valid:!1,animateForm:!1,loading:!1,token:null,userId:null,error:!1,errorMessage:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",fields:[{type:"email",value:"",hint:"\u042d\u0442\u043e \u043d\u0435 \u043f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 E-mail...",valid:!1,touched:!1,label:"\u0412\u0430\u0448 E-mail",stage:0,id:"email",rules:{required:!0,isEmail:!0}},{type:"password",value:"",hint:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",valid:!1,touched:!1,stage:0,label:"\u041f\u0430\u0440\u043e\u043b\u044c",rules:{required:!0,minimum:6}},{type:"text",value:"",hint:"",valid:!1,touched:!1,stage:1,id:"name",label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",rules:{required:!0}},{type:"select",value:"\u043c\u0443\u0436\u0441\u043a\u043e\u0439",hint:"",valid:!0,touched:!0,stage:1,id:"gender",label:"\u0412\u0430\u0448 \u043f\u043e\u043b",rules:{required:!0},options:["\u043c\u0443\u0436\u0441\u043a\u043e\u0439","\u0436\u0435\u043d\u0441\u043a\u0438\u0439"]}],images:[{selected:!1,src:E.a,name:"summer"},{selected:!1,src:k.a,name:"fall"},{selected:!1,src:j.a,name:"winter"},{selected:!1,src:v.a,name:"spring"}]},a.signupHandler=function(){if(a.state.valid){a.setState({loading:!0});var e={email:a.state.fields.find(function(e){return"email"===e.type}).value,password:a.state.fields.find(function(e){return"password"===e.type}).value,returnSecureToken:!0};h.a.post("https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=AIzaSyBRDKmG45aKAPtbwaYH7vrGLgcwJ3MAJfM",e).then(function(e){a.setState({loading:!1,token:e.data.idToken,userId:e.data.localId}),a.nextStage(1)}).catch(function(e){a.setState({loading:!1,error:!0})})}},a.loginHandler=function(){if(a.state.valid){a.setState({loading:!0});var e={email:a.state.fields.find(function(e){return"email"===e.type}).value,password:a.state.fields.find(function(e){return"password"===e.type}).value,returnSecureToken:!0};h.a.post("https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyBRDKmG45aKAPtbwaYH7vrGLgcwJ3MAJfM",e).then(function(e){a.setState({loading:!1,token:e.data.idToken,userId:e.data.localId}),a.nextStage(3)}).catch(function(e){a.setState({loading:!1,error:!0})})}},a.inputHandler=function(e,t){var n=Object(f.a)(a.state.fields),i=n.find(function(e){return e.label===t});i.value=e.target.value,i.touched=!0,i.valid=a.isValid(i.value,i.rules);var l=!0;n.filter(function(e){return e.stage===a.state.stage}).forEach(function(e){l=l&&e.valid}),a.setState({fields:n,valid:l})},a.imageClickHandler=function(e){var t=Object(f.a)(a.state.images),n=t.find(function(t){return t.name===e});n.selected=!n.selected;var i=!1;t.forEach(function(e){i=i||e.selected}),a.setState({images:t,valid:i})},a.isValid=function(e,t){var a=!0;if(t.required&&(a=a&&""!==e),t.isEmail){a=a&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}return t.minimum&&(a=a&&e.length>=t.minimum),a},a.nextStage=function(e){if(a.state.valid){var t=a.state.stage+e;a.setState({stage:t,animateForm:!0,valid:!1}),setTimeout(function(){a.setState({animateForm:!1})},1e3),3===t&&a.fetchData()}},a.fetchData=function(){a.setState({loading:!0});var e="?auth="+a.state.token+'&orderBy="userId"&equalTo="'+a.state.userId+'"';h.a.get("https://form-47033.firebaseio.com/users.json"+e).then(function(e){var t={};for(var n in e.data)t=Object(m.a)({},e.data[n]);console.log(t);var i=Object(f.a)(a.state.fields);console.log(i),t.fields.forEach(function(e){var t=i.find(function(t){return t.id===e.id});t.value=e.value,t.valid=!0}),console.log(i),a.setState({fields:i,images:t.images,loading:!1})}).catch(function(e){return a.setState({loading:!1,error:!0})})},a.sendData=function(){if(a.state.valid){a.setState({loading:!0});var e={userId:a.state.userId,fields:a.state.fields.filter(function(e){return e.valid&&e.id}).map(function(e){return{id:e.id,value:e.value}}),images:a.state.images.filter(function(e){return e.selected})};h.a.post("https://form-47033.firebaseio.com/users.json?auth="+a.state.token,e).then(function(e){a.nextStage(1),a.setState({loading:!1}),a.fetchData()}).catch(function(e){a.setState({loading:!1,error:!0})})}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=["Form"];this.state.animateForm&&t.push("appear");var a=null;return 0===this.state.stage?a=i.a.createElement("div",{className:t.join(" ")},i.a.createElement(O,{stage:this.state.stage}),i.a.createElement("h1",null,"\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f!"),this.state.fields.filter(function(t){return t.stage===e.state.stage}).map(function(t){return i.a.createElement(S,{key:t.type,label:t.label,hint:t.hint,type:t.type,value:t.value,onChange:function(a){return e.inputHandler(a,t.label)},valid:t.valid,touched:t.touched,options:t.options})}),i.a.createElement(C,{label:"\u0412\u043e\u0439\u0442\u0438",onClick:this.loginHandler}),i.a.createElement(C,{label:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",full:this.state.valid,onClick:this.signupHandler})):1===this.state.stage?a=i.a.createElement("div",{className:t.join(" ")},i.a.createElement(O,{stage:this.state.stage}),i.a.createElement("h1",null,"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435"),this.state.fields.filter(function(t){return t.stage===e.state.stage}).map(function(t){return i.a.createElement(S,{key:t.type,label:t.label,hint:t.hint,type:t.type,value:t.value,onChange:function(a){return e.inputHandler(a,t.label)},valid:t.valid,touched:t.touched,options:t.options})}),i.a.createElement(C,{label:"\u0414\u0430\u043b\u0435\u0435",full:this.state.valid,onClick:function(){return e.nextStage(1)}})):2===this.state.stage?a=i.a.createElement("div",{className:t.join(" ")},i.a.createElement(O,{stage:this.state.stage}),i.a.createElement("h1",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u043c\u044b \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f"),i.a.createElement(I,{images:this.state.images,onImageClick:this.imageClickHandler}),i.a.createElement(C,{label:"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c",full:this.state.valid,onClick:this.sendData})):3===this.state.stage&&(a=i.a.createElement("div",{className:t.join(" ")},i.a.createElement("h1",null,i.a.createElement("span",{className:"green"},"\u0413\u043e\u0442\u043e\u0432\u043e!")," \u0412\u043e\u0442 \u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c:"),this.state.fields.filter(function(e){return e.valid&&e.id}).map(function(t){return i.a.createElement(S,{key:t.type,label:t.label,hint:t.hint,type:t.type,value:t.value,onChange:function(a){return e.inputHandler(a,t.label)},valid:t.valid,touched:t.touched,options:t.options,readonly:!0})}),this.state.images.find(function(e){return e.selected})?i.a.createElement("h6",null,"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"):null,i.a.createElement(I,{images:this.state.images.filter(function(e){return e.selected}),readonly:!0}))),this.state.loading&&(a=i.a.createElement(N,null)),this.state.error&&(a=i.a.createElement("h1",null,this.state.errorMessage)),a}}]),t}(n.Component)),x=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(H,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.ab9b9258.chunk.js.map